<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>ExtJS 5.1.0</title>
    <link rel="stylesheet" type="text/css" href="ext-5.1.0/ext-theme-classic/build/resources/ext-theme-classic-all.css" />
    <script type="text/javascript" src="ext-5.1.0/ext-all.js"></script>
    <script type="text/javascript" src="ext-5.1.0/ext-theme-classic/build/ext-theme-classic.js"></script>
  </head>
  <body> 
    <div id="container"></div>
    <script>
      Ext.onReady(function() {

        Ext.Loader.setConfig({
          enabled: true
        });

        Ext.define('SysOpv.view.edit.Band', {
          extend: 'Ext.window.Window',
          alias: 'widget.editband',
          title: 'Setup',
          layout: 'fit',
          constrain: true,
          modal: true,
          initComponent: function() {
            this.items = [{
                xtype: 'form',
                bodyPadding: 10,
                items: [{
                    xtype: 'textfield',
                    name: 'name',
                    fieldLabel: 'Name'
                  }]
              }];

            this.buttons = [{
                text: 'Save',
                action: 'save'
              }, {
                text: 'Cancel',
                scope: this,
                handler: this.close
              }];

            this.callParent(arguments);
          }
        });

        Ext.create('Ext.TabPanel', {
          renderTo: 'container',
          items: [
            {
              title: 'Tab 1',
              itemId: 'tab1',
              layout: 'fit',
              items: [
                {xtype: 'button', text: 'Show window', handler: function() {
                    var w = Ext.widget('editband');
                    this.up('tabpanel').showWindow(this.up('#tab1'), w);
                  }}
              ]
            },
            {title: 'Tab 2'}
          ],
          height: 400,
          showWindow: function(tab, w) {
            tab.add(w);
            tab.popup = w;
            w.on('close', function() {
              delete this.popup;
            }, tab, {single: true});
            w.show();
          },
          listeners: {
            tabchange: function(panel, tab) {
              if(tab.popup !== undefined) {
                tab.popup.show();
              }
            }
          }
        });

      });
    </script> 
</body>
</html>
